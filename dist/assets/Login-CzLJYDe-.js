import{r as c,c as h,j as e,k as y,V as a,s as x,d as w}from"./vendor-C22lMxs3.js";import{a as i,g as v}from"./index-CDfupFrp.js";import{L as j,B as k}from"./Button-C2gHDiQh.js";function S(){const[u,g]=c.useState(""),[d,f]=c.useState(""),[l,n]=c.useState(!1),o=h(),m=async r=>{var s;if(r==="vinayak3788@gmail.com")return!0;try{const{data:t}=await w.get(`/api/get-profile?email=${encodeURIComponent(r)}`);return t.blocked?(a.error("Your account has been blocked. Contact admin."),await i.signOut(),!1):[1,"1",!0].includes(t.mobileVerified)?!0:(a.error("Please verify your mobile number."),o("/verify-mobile"),!1)}catch(t){return console.error("Error fetching profile:",t),((s=t.response)==null?void 0:s.status)===404?(a.error("No account found. Please sign up first."),await i.signOut(),o("/signup")):(a.error("Server error. Try again later."),await i.signOut()),!1}},p=async r=>{r.preventDefault(),n(!0);try{const s=await y(i,u,d);await m(s.user.email)&&(a.success("Welcome back!"),o("/userdashboard"))}catch(s){console.error("Login error:",s),a.error("Login failed. Please check your credentials.")}finally{n(!1)}},b=async()=>{n(!0);try{const r=await x(i,v);await m(r.user.email)&&(a.success("Welcome back!"),o("/userdashboard"))}catch(r){console.error("Google popup sign-in error:",r),a.error("Google sign-in failed. Please try again.")}finally{n(!1)}};return e.jsxs(j,{title:"Log In to MVP Services",maxWidth:"max-w-md",children:[e.jsxs("form",{onSubmit:p,className:"space-y-4",autoComplete:"off",spellCheck:"false",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:u,autoComplete:"off",onChange:r=>g(r.target.value),required:!0,className:"w-full border border-gray-300 px-3 py-2 rounded-md focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:d,onChange:r=>f(r.target.value),required:!0,className:"w-full border border-gray-300 px-3 py-2 rounded-md focus:ring-2 focus:ring-purple-500"})]}),e.jsx(k,{type:"submit",disabled:l,className:"w-full",children:l?"Signing in…":"Log In"})]}),e.jsx("div",{className:"text-center font-semibold my-6",children:"OR"}),e.jsxs("button",{onClick:b,disabled:l,className:"w-full flex items-center justify-center border border-gray-300 bg-white px-4 py-2 rounded-md hover:bg-gray-100 disabled:opacity-50 transition",children:[e.jsx("img",{src:"/google-logo.svg",alt:"Google",className:"w-5 h-5 mr-2"}),"Sign in with Google"]}),e.jsxs("p",{className:"mt-6 text-center text-sm",children:["Don’t have an account?"," ",e.jsx("button",{onClick:()=>o("/signup"),className:"text-purple-600 font-medium underline",children:"Sign Up"})]})]})}export{S as default};
